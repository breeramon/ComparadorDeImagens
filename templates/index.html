<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Comparador de Imagens</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="app-header">
    <h1 class="app-title"><i class="fas fa-images"></i> Comparador de Imagens</h1>
    <p class="app-subtitle">Edite, compare e analise suas imagens com precisão</p>
</div>

<div class="app-container">
    <aside class="sidebar" id="sidebar-controls">
        <h3><i class="fas fa-sliders-h"></i> Editar Imagem</h3>

        <div class="control-group">
            <div class="control-label">
                <span><i class="fas fa-sun"></i> Brilho</span>
                <span class="slider-value" id="value-brilho">0</span>
            </div>
            <input type="range" id="slider-brilho" min="-100" max="100" value="0">
        </div>

        <div class="control-group">
            <div class="control-label">
                <span><i class="fas fa-adjust"></i> Contraste</span>
                <span class="slider-value" id="value-contraste">1.0</span>
            </div>
            <input type="range" id="slider-contraste" min="0.0" max="3.0" step="0.1" value="1.0">
        </div>

        <div class="control-group">
            <div class="control-label">
                <span><i class="fas fa-palette"></i> Saturação</span>
                <span class="slider-value" id="value-saturacao">1.0</span>
            </div>
            <input type="range" id="slider-saturacao" min="0.0" max="3.0" step="0.1" value="1.0">
        </div>

        <div class="control-group">
            <div class="control-label">
                <span><i class="fas fa-redo"></i> Rotação</span>
                <span class="slider-value" id="value-rotacao">0</span>
            </div>
            <input type="range" id="slider-rotacao" min="-180" max="180" value="0">
        </div>

        <div class="control-group">
            <div class="control-label">
                <span><i class="fas fa-expand-arrows-alt"></i> Redimensionar</span>
                <span class="slider-value" id="value-redim">100%</span>
            </div>
            <input type="range" id="slider-redim" min="10" max="200" step="5" value="100">
        </div>

        <div class="button-group">
            <button class="icon-btn" id="undo-button" title="Desfazer" disabled>
                <i class="fas fa-undo"></i>
            </button>
            <button class="icon-btn" id="redo-button" title="Refazer" disabled>
                <i class="fas fa-redo"></i>
            </button>
            <button class="icon-btn" id="reset-button" title="Redefinir">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </aside>

    <main class="main-content">
        <div class="section active" id="section-upload">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2 class="section-title">Upload da Imagem</h2>
            </div>

            <input type="file" id="imageUploader" accept=".jpg,.jpeg,.png" class="input-file-hidden">
            <label for="imageUploader" class="upload-zone" id="upload-zone">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <div class="upload-text">
                    <h4>Clique ou arraste sua imagem aqui</h4>
                    <p>Suporta JPG, JPEG e PNG</p>
                    <p style="font-size: 0.85rem; color: var(--text-light);">Tamanho máximo: 5MB</p>
                </div>
            </label>

            <div id="file-info-container"></div>
            <div id="upload-error"></div>
        </div>

        <div class="section" id="section-preview">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2 class="section-title">Pré-visualização em Tempo Real</h2>
            </div>

            <div class="preview-grid">
                <div class="preview-card">
                    <h4><i class="fas fa-image"></i> Original</h4>
                    <div class="preview-image-container">
                        <img id="img-preview-original" style="display:none;">
                        <span class="preview-placeholder">Nenhuma imagem carregada</span>
                    </div>
                </div>
                <div class="preview-card">
                    <h4><i class="fas fa-wand-magic-sparkles"></i> Editada (Ao Vivo)</h4>
                    <div class="preview-image-container">
                        <img id="img-preview-edited" style="display:none;">
                        <span class="preview-placeholder">Aguardando edição</span>
                    </div>
                </div>
                <button class="btn btn-primary" id="go-to-analysis" style="margin-top: 30px; align-self: center;">
                    <i class="fas fa-arrow-right"></i>
                    Continuar para Análise
                </button>
            </div>
        </div>

        <div class="section" id="section-analysis">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2 class="section-title">Análise e Comparação</h2>
            </div>

            <button class="btn btn-primary" id="compare-button" disabled>
                <i class="fas fa-chart-line"></i>
                Analisar Diferenças
            </button>

            <div id="status"></div>

            <div class="metrics">
                <div class="metric-card">
                    <div class="metric-label">SSIM (Similaridade)</div>
                    <div class="metric-value" id="ssim-score">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Diferença Média</div>
                    <div class="metric-value" id="diff-media">-</div>
                </div>
            </div>

            <div class="results-grid">
                <div class="preview-card">
                    <h4><i class="fas fa-image"></i> Original</h4>
                    <div class="preview-image-container">
                        <img id="result-img-original" style="display:none;">
                        <span class="preview-placeholder">Aguardando análise</span>
                    </div>
                </div>
                <div class="preview-card">
                    <h4><i class="fas fa-wand-magic-sparkles"></i> Editada</h4>
                    <div class="preview-image-container">
                        <img id="result-img-edited" style="display:none;">
                        <span class="preview-placeholder">Aguardando análise</span>
                    </div>
                </div>
                <div class="preview-card">
                    <h4><i class="fas fa-chart-area"></i> Mapa de Diferença</h4>
                    <div class="preview-image-container">
                        <img id="result-img-map" style="display:none;">
                        <span class="preview-placeholder">Aguardando análise</span>
                    </div>
                </div>
            </div>

            <button class="btn btn-secondary" id="download-csv" style="margin-top: 30px;" disabled>
                <i class="fas fa-download"></i>
                Baixar Ranking (CSV)
            </button>
        </div>
    </main>
</div>

<script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
